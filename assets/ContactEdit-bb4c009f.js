import{_ as p,j as i,r as f,o as l,c as d,a as e,t as w,h as c,v as r,g as v,d as _,i as m}from"./index-ef6ac8cc.js";import{B as h}from"./BackBtn-25751675.js";const C={data(){return{contact:i.getEmptyContact(),newName:"",newEmail:"",newPhone:"",invalidInputs:!1}},components:{BackBtn:h},computed:{contactId(){return this.$route.params.id},header(){return this.contactId?"Edit":"Signup"},backUrl(){if(this.contactId)return`contact/${this.contact._id}`}},watch:{contactId(){this.loadContact()}},methods:{async saveContact(){try{let n;if(this.contact._id)n={_id:this.contact._id,name:this.newName,email:this.newEmail,phone:this.newPhone};else if(this.newName===""||this.newEmail===""||this.newPhone===""){this.invalidInputs=!0;return}await i.saveContact(n),this.$router.push("/contact")}catch(n){console.log("err",n),showErrorMsg("Cannot save contact")}},async loadContact(){try{this.contact=await i.getContactById(this.contactId)}catch(n){console.log("err",n),showErrorMsg("Cannot load contact")}}},async created(){this.contactId&&(await this.loadContact(),this.newName=this.contact.name,this.newEmail=this.contact.email,this.newPhone=this.contact.phone)},components:{BackBtn:h}},y={class:"contact-edit"},E={class:"card flex column"},B=e("label",{for:"form-name"},"Name",-1),k=e("label",{for:"form-email"},"Email",-1),I=e("label",{for:"form-phone"},"Phone",-1),N={key:0},g={class:"button-container flex justify-between"};function b(n,t,P,x,o,s){const u=f("BackBtn");return l(),d("main",y,[e("h1",null,w(s.header),1),e("form",E,[B,c(e("input",{class:"card",id:"form-name",type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>o.newName=a)},null,512),[[r,o.newName,void 0,{trim:!0}]]),k,c(e("input",{class:"card",id:"form-email",type:"email","onUpdate:modelValue":t[1]||(t[1]=a=>o.newEmail=a)},null,512),[[r,o.newEmail,void 0,{trim:!0}]]),I,c(e("input",{class:"card",id:"form-phone",type:"phone","onUpdate:modelValue":t[2]||(t[2]=a=>o.newPhone=a)},null,512),[[r,o.newPhone,void 0,{trim:!0}]]),o.invalidInputs?(l(),d("p",N,"Please fill all of the fields")):v("",!0),e("div",g,[_(u,{onClick:t[3]||(t[3]=m(()=>{},["prevent"])),url:s.backUrl},null,8,["url"]),e("button",{onClick:t[4]||(t[4]=m((...a)=>s.saveContact&&s.saveContact(...a),["prevent"]))},"Save")])])])}const M=p(C,[["render",b]]);export{M as default};
